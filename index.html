<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Sistema Dot</title>
</head>
<body>

<h2>Sistema Dot - Escola Estadual Moreira e Silva</h2>

<button onclick="login()">Entrar com Google</button>
<button onclick="logout()">Sair</button>

<p id="usuario"></p>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getAuth, signInWithPopup, GoogleAuthProvider, signOut, onAuthStateChanged } 
from "https://www.gstatic.com/firebasejs/12.9.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "SUA_API_KEY_AQUI",
  authDomain: "sistema-dot.firebaseapp.com",
  projectId: "sistema-dot",
  storageBucket: "sistema-dot.firebasestorage.app",
  messagingSenderId: "1003611331429",
  appId: "1:1003611331429:web:e966521b694500de059f8c"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();

window.login = function() {
  signInWithPopup(auth, provider)
    .then((result) => {
      console.log("Login realizado!");
    })
    .catch((error) => {
      console.error(error);
    });
}

window.logout = function() {
  signOut(auth);
}

onAuthStateChanged(auth, (user) => {
  if (user) {
    document.getElementById("usuario").innerText =
      "Conectado como: " + user.email;
    console.log("Firebase conectado com sucesso!");
  } else {
    document.getElementById("usuario").innerText =
      "Nenhum usu√°rio conectado";
  }
});

</script>

</body>
</html>
